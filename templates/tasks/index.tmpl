{{define "tasks/index"}}
<html>
{{ template "head" . }}

{{ template "navbar" . }}

<style>
  table {
    font-size: 24px;
  }
</style>

<body>
  <div class="p-5">
    <table class="table">
      <thead class=" ">
        <tr>
          <th>Name</th>
          <th>Status</th>
          <th>Assignee</th>
      </thead>
      <tbody>
        {{ range $index, $task := .tasks }}
        <tr>
          <td>
            <a href="/task/{{ $task.ID }}"
              class="text-decoration-none">{{$task.Title}}</a>
          </td>
          <td>
            <span
              class="badge {{ StatusColor $task.Status }} rounded-pill">{{$task.StatusName}}</span>
          </td>
          <td>
            {{ if ne $task.User nil }}
            <a href="/user/{{ $task.User.ID }}">{{ $task.User.Name }}</a>
            {{ end }}
          </td>
        </tr>
        {{ end }}
      </tbody>
    </table>
    <div>
      <div class="mb-3">Showing {{ .start }} - {{ .end }} of {{ .totalItems }}
      </div>

      {{ $current := .current }}
      <nav aria-label="Page navigation example">
        <ul class="pagination pagination-sm">
          <li class="page-item">
            <a class="page-link" href="/?page={{ $current  }}"
              aria-label="Previous">
              <span aria-hidden="true">Previous</span>
            </a>
          </li>

          {{ range $index, $page := .pages }}
          <li class="page-item"><a
              class="page-link {{ if eq $page $current }} bg-primary {{ end }}"
              href="/?page={{ $page }}">{{
              $page }}</a></li>
          {{ end }}

          <li class="page-item">
            <a class="page-link" href="#" aria-label="Next">
              <span aria-hidden="true">Next</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</body>

</html>
{{end}}