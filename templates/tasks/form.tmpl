{{ define "tasks/form" }}

{{ $task := .task }}

<form id="taskForm" {{ if ne .task.ID nil }} action="/task/{{ .task.ID }}/edit"
  {{ else }} action="/task/new" {{ end }} method="POST">
  {{ template "flash" . }}
  <div class="row">
    <div class="col-12 form-group">
      <label for="title">Title:</label>
      <input type="text" value="{{ .task.Title }}" class="form-control"
        id="title" name="title">
    </div>
  </div>
  <div class="row">
    <div class="col-6 form-group">
      <label for="status">Assignee:</label>
      <select name="userId" id="" class="form-control">
        <option value="">--Unassigned--</option>
        {{ range $index, $user := .users }}
        {{ $selected := eq $task.User.ID $user.ID}}
        <option value="{{ $user.ID }}" {{ if $selected }}selected{{ end }}>
          {{ $user.Name }}</option>
        {{ end }}
      </select>
    </div>
    <div class="col-6 form-group">
      <label for="status">Status:</label>
      <select name="status" id="" class="form-control">
        {{ range $index, $status := .taskStatus }}
        {{ $selected := eq $task.Status $status}}
        <option value="{{ $status }}" {{ if $selected }}selected{{ end }}>{{
          $status }}</option>
        {{ end }}
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-12 form-group">
      <label for="description">Description</label>
      <textarea name="description" id="" cols="30" rows="10"
        class="form-control">{{ if ne .task.Description nil }}{{ .task.Description }}{{ end }}</textarea>
    </div>
  </div>
  <button type="submit" id="submit" class="btn btn-primary">
    {{ if ne .task.ID nil }}Update{{ else }}Create{{ end }}
  </button>
</form>
{{ end }}